!function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(i,a,function(t){return e[t]}.bind(null,a));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=9)}([function(e){e.exports={sprite:[{type:"head",name:"head_hero1.png"},{type:"attack",name:"attack_hero1.png"},{type:"hurt",name:"hurt_hero1.png"},{type:"legs",name:"legs_hero1.png"},{type:"weapon",name:"weapon_hero1.png"},{type:"body",name:"body_hero1.png"},{type:"heal",name:"heal_hero1.png"}]}},function(e){e.exports={sprite:[{type:"head",name:"head_enemy1.png"},{type:"head",name:"head_enemy2.png"},{type:"head",name:"head_enemy3.png"},{type:"head",name:"head_enemy4.png"},{type:"head",name:"head_enemy5.png"},{type:"head",name:"head_enemy6.png"},{type:"head",name:"head_enemy7.png"},{type:"attack",name:"attack_enemy1.png"},{type:"hurt",name:"hurt_enemy1.png"},{type:"legs",name:"legs_enemy1.png"},{type:"legs",name:"legs_enemy2.png"},{type:"legs",name:"legs_enemy3.png"},{type:"legs",name:"legs_enemy4.png"},{type:"legs",name:"legs_enemy5.png"},{type:"weapon",name:"weapon_enemy1.png"},{type:"weapon",name:"weapon_enemy2.png"},{type:"weapon",name:"weapon_enemy3.png"},{type:"weapon",name:"weapon_enemy4.png"},{type:"weapon",name:"weapon_enemy5.png"},{type:"body",name:"body_enemy1.png"},{type:"body",name:"body_enemy2.png"},{type:"body",name:"body_enemy3.png"},{type:"body",name:"body_enemy4.png"},{type:"body",name:"body_enemy5.png"},{type:"body",name:"body_enemy6.png"}]}},function(e){e.exports={enemyData:{adjective:["Злобный","Сопливый","Смешной","Глупый","Думающий","Страшный","Странный","Забытый","Сильный","Ловкий","Несильный","Неловкий","Умный","Неумный","Красивый","Классный","Дружелюбный","Радостный","Унылый","Развитый","Хитрый","Жосткий","Голодный","Смущенный","Преданный","Ленивый","Завидующий","Молодой","Скрытый","Громкий","Настырный","Непобедимый","Неумирающий","Бархатный","Сверкающий","Звуковой","Тихий","Начитанный","Трусливый","Зеленный","Подгтовленный","Солнечный","Лунный","Сказочный","Способный","Искусный","Любезный","Беспокойный","Равнодушный","Пылкий","Высокомерный","Коварный","Отважный","Жадный","Алчный","Неуклюжий","Подлый","Яркий","Невозмутимый","Беззаботный","Изменчивый","Непостоянный","Воспитанный","Вежливый","Грубый","Тщеславный","Самодовольный","Внимательный","Тактичный","Галантный","Завистливый","Непреклонный","Нечестный","Активный","Восторженный","Опытный","Безрассудный","Нервный","Щедрый","Хороший","Добродушный","Доверчивый","Дерзкий","Неучтивый","Невежливый","Вялый","Неумелый","Наглый","Скучный","Бестактный","Скупой","Упрямый","Пугливый","Медленный","Апатичный","Недобрый","Неуловимый","Дивный","Дикий","Дубовый","Землянной","Водный","Огненный","Ветренный","Колдовской","Нефритовый","Малый","Большой","Буйный","Древний","Небесный","Астральный","Тропический","Хищный","Ядовитый","Яростный","Мрачный","Огромный","Мелкий","Маленький","Косолапый","Толстокожий","Вулканический","Ложный","Зверинный","Самоцветный","Секретный","Храбрый","Блуждающий","Взрывной","Болезненный","Королевский","Морозный","Токсичный","Главный","Мощный","Одинокий","Пещерный","Патрульный","Ужасный","Журчащий","Кислотный","Болтливый","Магический","Чародейский","Шальной","Верховный","Нестабильный","Павший","Трескучий","Хладный","Безумный","Космический","Неожиданный","Сердитый","Диковинный","Снежный","Боевой","Защитный","Мудрый","Вредный","Защищенный","Золотой","Серебрянный","Бронзовый","Неопознанный","Раздражающий","Хрустальный","Гребнистый","Загадочный","Псионный","Теневой","Золоченный","Вечный","Фальшивый","Колкий","Остроумный","Прыгающий","Железный","Стальной","Металический","Свинцовый","Собирающий","Научный","Рунный","Кровожадный","Вороватый","Тотемный","Пыльный","Раздвоенный","Туннельный","Грозовой","Грозный","Игристый","Последний","Говорящий","Гремящий","Безликий","Каменный","Мраморный","Морской","Речной","Озерной","Городской","Реактивный","Усиленный","Ржавый","Внезапный","Осадный","Пепельный","Уличный","Цепкий","Тяжелый","Легкий","Опасный","Болотный","Восковой","Жуткий","Заводной","Ревностный","Скромный","Грязный","Драгоценный","Искаженный","Радушный","Сонный","Удалой","Визжащий","Зубастый","Кошмарный","Молчаливый","Ореховый"],race:["Огр","Плут","Пират","Гаргулья","Варвар","Тролль","Громила","Берсерк","Метатель","Воевода","Лич","Гриб","Орк","Кобольд","Скелет","Гном","Фея","Осколок","Человек","Эльф","Нечто","Демон","Неруб","Энт","Каджит","Дворф","Нежить","Призрак","Гоблин","Страж","Сатир","Циклоп","Мурлок","Гнолл","Кентавр","Нага","Трогг","Зерг","Вампир","Гидра","Зомби","Рыцарь","Дух","Машина","Голем","Механизм","Пустой","Зверь","Дракон","Тиранид","Робот","Маг","Колдун","Герой","Злодей","Умертвие","Исчадье","Бот","Упырь","Странник","Повелитель","Элеметаль","Душа","Шаман","Воин","Разбойник","Друид","Гомункл","Насекомое","Мастер","Боец","Вурдалак"],name:["Джек","Виталий","Макс","Дима","Громм","Дима","Рено","Гено","Петя","Вася","Женя","Ника","Лера","Сергей","Филя","Нечто","Алистер","Рин","Рэм","Мадока","Банни","Уса","ХуаВей","КсяоМи","Ли","Рок","Ичиго","Вэш","Ю","Гхост","Клайд","Лок","Док","Кенни","Алекс","Саша","Слава","Фимм","Кирил","Феликс","Мария","Даня","Ник","Виктор","Лев","Егор","Артемий","Иван","Рома","Артур","Валентин","ТойоТа","МицБиси","Влад","Денис","Кузя","Камина","Сэйлор","Усаги","Чиба","Ами","Рэй","Аска","Макото","Минако","Мичиру","Харука","Харуха","Сэцуна","Хотару","Синдзи","Мисато","Рицуко","Каору","Гэндо","Майя","ДжоДжо","Джо","Дио","Кира","Уилл","Джозеф","Вам","Карс","Джотаро","Игги","Джоске","Рохан","Акира","Джорно","Джолин","Бруно","Зла","Добра","Души","Гнева","Гнева","Жадности","Тьмы","Ужаса","Клинка","Топора","Меча","Холмов","Гор","Рек","Морей"]}}},function(e){e.exports={sprite:[{type:"background",name:"background_1.png"},{type:"info",name:"backgroundInfo_1.png"},{type:"background",name:"background_2.png"},{type:"background",name:"background_3.png"},{type:"background",name:"background_4.png"},{type:"background",name:"background_5.png"},{type:"background",name:"background_6.png"},{type:"background",name:"background_7.png"},{type:"background",name:"background_8.png"},{type:"background",name:"background_9.png"},{type:"background",name:"background_10.png"},{type:"background",name:"background_11.png"},{type:"background",name:"background_12.png"}]}},function(e){e.exports={example:[{word:"Еденица",result:2},{word:"Венегрет",result:1},{word:"Комфорка",result:2},{word:"Изподтишка",result:1},{word:"Договора",result:7},{word:"Придти",result:3},{word:"Симпотичный",result:4},{word:"Лутший",result:2},{word:"Черезчур",result:4},{word:"Девчёнка",result:4},{word:"Уполномачивать",result:7},{word:"Борятся",result:3},{word:"Ньанс",result:1},{word:"Настальгия",result:1},{word:"Стериотип",result:4},{word:"Эксперемент",result:6},{word:"Прогроммист",result:5},{word:"Сереал",result:3},{word:"Ониме",result:0},{word:"Нью-Ёорк",result:4},{word:"Пропаведник",result:4},{word:"Жилезо",result:1},{word:"Некаторые",result:3},{word:"Ёога",result:0},{word:"Концинтрация",result:4},{word:"Преложение",result:2},{word:"Сталетие",result:2},{word:"Сораконожка",result:3},{word:"Килаграмм",result:3},{word:"Сомолёт",result:1},{word:"Землетресение",result:7},{word:"Пятелетка",result:3},{word:"Каснуться",result:1},{word:"Излажить",result:3},{word:"Слогать",result:2},{word:"Накланять",result:4},{word:"Сотварить",result:4},{word:"Загарать",result:3},{word:"Утворь",result:3},{word:"Выгорки",result:3},{word:"Пригорь",result:4},{word:"Зорница",result:1},{word:"Озорение",result:2},{word:"Плавец",result:2},{word:"Пловник",result:2},{word:"Попловок",result:4},{word:"Возрост",result:4},{word:"Водорасль",result:5},{word:"Взрощённый",result:3},{word:"Растовщик",result:1},{word:"Отрослевой",result:3},{word:"Ровняйсь",result:1},{word:"Равнять",result:1},{word:"Уравень",result:2},{word:"Вымакнуть",result:3},{word:"Промакает",result:4},{word:"Смаченный",result:2},{word:"Намачи",result:3},{word:"Наскачить",result:4},{word:"Вскачить",result:3},{word:"Скочок",result:2},{word:"Умерать",result:2},{word:"Заперать",result:3},{word:"Прочетать",result:4},{word:"Обжегать",result:3},{word:"Блестать",result:2},{word:"Счетать",result:2},{word:"Сочитание",result:3},{word:"Снемать",result:2},{word:"Поженать",result:3},{word:"Прокленать",result:5},{word:"Чепорный",result:1},{word:"Крыжёвник",result:4},{word:"Трущёба",result:4},{word:"Трещётка",result:4},{word:"Шокалад",result:3},{word:"Шассе",result:1},{word:"Шафёр",result:1},{word:"Шовенист",result:3},{word:"Теплавоз",result:4},{word:"Скопедом",result:4},{word:"Горецвет",result:3},{word:"Агрокультура",result:3},{word:"Розыграть",result:1},{word:"Предыдущей",result:8},{word:"Предистория",result:4},{word:"Безидейный",result:3},{word:"Дезенфекция",result:3},{word:"Отделеть",result:5},{word:"Сдешний",result:0},{word:"Незвергнуть",result:1},{word:"Безправный",result:2},{word:"Росписка",result:1},{word:"Превлечь",result:2},{word:"Прелечь",result:0},{word:"Преподнять",result:2},{word:"Привратить",result:2},{word:"Презирать",result:2},{word:"Преёмник",result:2},{word:"Приемник",result:2},{word:"Преступить",result:2},{word:"Раёон",result:2},{word:"Маёор",result:2},{word:"Щелочь",result:1},{word:"Брошура",result:4},{word:"Жури",result:1},{word:"Парашут",result:5},{word:"Циган",result:1},{word:"Циплёнок",result:1},{word:"Ценовка",result:1}]}},function(e){e.exports={example:[{word:"Cat",result:["кошка","кот","котенок","котёнок"]},{word:"Dog",result:["собака","собачка","пес","пёс"]},{word:"Red",result:["красный","рыжий","алый","пёс"]},{word:"Man",result:["человек","мужчина","муж"]},{word:"Woman",result:["женщина","Женский пол"]},{word:"Have",result:["иметь","получать","быть должным"]},{word:"There",result:["там","туда","здесь"]},{word:"Out",result:["вне","снаружи","за"]},{word:"Go",result:["идти","ехать","уходить"]},{word:"Like",result:["похожий","как","подобно","любить","нравиться"]},{word:"Be",result:["быть","существовать","находиться"]},{word:"Look",result:["взгляд","смотреть"]},{word:"Other",result:["другой","иной","еще"]},{word:"See",result:["видеть"]},{word:"Here",result:["здесь","тут"]},{word:"Thing",result:["вещь","предмет"]},{word:"Way",result:["путь","дорога"]},{word:"Right",result:["правый","верно","право"]},{word:"All",result:["все","вся","всё"]},{word:"This",result:["этот","эта","это"]},{word:"Up",result:["наверх","наверху","выше","вверх по","вдоль по"]},{word:"Could",result:["мог","умел"]},{word:"Then",result:["тогда","затем"]},{word:"Them ",result:["их","им"]},{word:"Now",result:["теперь","сейчас"]},{word:"Been",result:["был","была","было"]},{word:"Which",result:["который","что","yyy"]},{word:"Back",result:["назад","обратно","вдоль","вспять"]},{word:"About",result:["кругом","вокруг","около","о","об","относительно"]},{word:"Know",result:["знать","узнавать"]},{word:"Just",result:["просто","прямо","только что"]},{word:"Their",result:["их","свои"]},{word:"Any",result:["любой","никакой","всякий","какой-нибудь"]},{word:"Get",result:["получать","брать","приобретать"]},{word:"Over",result:["над","свыше","за"]},{word:"Some",result:["несколько","немного","одни"]},{word:"Сome",result:["приходить","прийти","приезжать","случаться","приехать"]},{word:"So",result:["так","тоже","также","таким образом"]},{word:"By",result:["у","около","от","по","на","при"]}]}},function(e){e.exports={phrase:["Ошибка","Неудача","Error","Теперь я","Мой выход","Что-то не так?","Я иду","Хе-хе","Ха-ха","Тихо...","Атакую","Я сильнее","(Смеется)","Провал","Не пройдешь","Мой час","Наконец-то","Пробил час","Время пришло","Сложно","Крушить","Ломать","Просчет","Промах","Опечатка","Упустил","Неправильно","Недоглядел","Ложный шаг","Недостаточно","Искажение","Не обманешь","Помарка","Ошибочка","Недароботка","Неточность","Осечка","Неуспех","Крах","Фиаско","Несчастье","Невезуха","Облом","Не выгорело","Ну удалось","Пролет","Нет ответа","Не то","Переход"]}},function(e){e.exports={example:["english","phone","people","woman","child","teacher","family","parents","father","mother","wife","husband","daughter","brother","uncle","aunt","summer","price","money","star","feel","minute","sleep","card","stone","school","river","square","cinema","area","book","company","country","day","eye","fact","group","hand","home","job","life","month","night","pony","unicorn","number","part","place","point","problem","program","question","room","state","story","system","ghost","student","time","water","way","week","woman","word","work","world","year"]}},function(e){e.exports={example:["english","phone","people","woman","child","teacher","family","parents","father","mother","wife","husband","daughter","brother","uncle","aunt","summer","price","money","star","feel","minute","sleep","card","stone","school","river","square","cinema","area","book","company","country","day","eye","fact","group","hand","home","job","life","month","night","pony","unicorn","number","part","place","point","problem","program","question","room","state","story","system","ghost","student","time","water","way","week","woman","word","work","world","year"]}},function(e,t,s){"use strict";s.r(t);s(10);var i=s(1),a=s(2),h=s(6);class r{constructor(){this.state="wait",this.maxHealth=100,this.health=100,this.dealDamageBonus=0,this.dealDamage=20,this.widthHpBar=371,this.status=Object.create(null),this.status.dead=!1,this.readySprite=0,this.loadSprite=0,this.level=1,this.adjectiveEnemy=["Тестовый"],this.raceEnemy=["Образец"],this.nameEnemy=["SCP"],this.phraseEnemy=["Мой ход"],this.enemyMagic=[],this.chooseEnemyMagic=0,this.enemyMagicSound=[],this.excludeMaxName=10,this.adjectiveEnemyExclude=[],this.raceEnemyExclude=[],this.nameEnemyExclude=[],this.choosePhrase=0,this.enemyName=this.getEnemyName(),this.arrEnemyHead=[],this.arrEnemyBody=[],this.arrEnemyLegs=[],this.arrEnemyWeapon=[],this.arrEnemyAttack=[],this.arrEnemyHurt=[],this.shiftHead=0,this.frameWidthHead=300,this.frameHeightHead=300,this.totalFramesHead=7,this.currentFrameHead=0,this.shiftWeapon=0,this.frameWidthWeapon=300,this.frameHeightWeapon=300,this.totalFramesWeapon=7,this.currentFrameWeapon=0,this.shiftAttack=0,this.frameWidthAttack=300,this.frameHeightAttack=600,this.totalFramesAttack=8,this.currentFrameAttack=0,this.shiftHurt=0,this.frameWidthHurt=300,this.frameHeightHurt=600,this.totalFramesHurt=8,this.currentFrameHurt=0,this.frameWidthLegs=300,this.frameHeightLegs=300,this.frameWidthBody=300,this.frameHeightBody=300,this.height=768,this.width=1366,this.posX=this.width-350,this.posY=this.height-630,this.totalFramesHeadAttack=9,this.chooseBody=0,this.chooseHead=0,this.chooseLegs=0,this.chooseWeapon=0,this.chooseAttack=0,this.chooseHurt=0,this.context=null,this.loadGeneratorNames(),this.loadResources(),this.loadTalk(),this.initMagic()}initMagic(){let e=0;this.enemyMagic.push({id:e,name:"Kick",damage:20,chance:75,sound:"enemy1_kick.mp3"}),e+=1,this.enemyMagic.push({id:e,name:"Smash",damage:30,chance:25,sound:"enemy2_smash.mp3"}),e+=1,this.enemyMagic.push({id:e,name:"Ultimate",damage:40,chance:5,sound:"enemy3_ultimate.mp3"}),this.initMagicSound()}initMagicSound(){for(let e=0;e<this.enemyMagic.length;e+=1)this.enemyMagicSound.push(new Audio(`./src/components/enemy/sound/${this.enemyMagic[e].sound}`))}pickEnemyMagic(){let e=0;for(;;)if((e=this.enemyMagic[Math.floor(Math.random()*this.enemyMagic.length)]).chance>=Math.floor(100*Math.random())){this.dealDamage=e.damage,this.chooseEnemyMagic=e.id,console.log("Enemy pick magic",e.name,e.damage);break}}loadTalk(){for(let e=0;e<h.phrase.length;e+=1)this.phraseEnemy.push(h.phrase[e])}say(){let e;this.dealDamage<=20?e="white":this.dealDamage<=30?e="orange":this.dealDamage<=100&&(e="red"),this.drawText(this.choosePhrase,this.posX-60,this.posY+25,e)}getEnemyName(){const e=[];let t,s,i;if(this.nameEnemy.length>this.excludeMaxName){for(;;)if(t=this.nameEnemy[Math.floor(Math.random()*this.nameEnemy.length)],!this.nameEnemyExclude.includes(t)){this.nameEnemyExclude.push(t),this.nameEnemyExclude.length>this.excludeMaxName&&this.nameEnemyExclude.shift();break}}else t=this.nameEnemy[Math.floor(Math.random()*this.nameEnemy.length)];if(this.adjectiveEnemy.length>this.excludeMaxName){for(;;)if(s=this.adjectiveEnemy[Math.floor(Math.random()*this.adjectiveEnemy.length)],!this.adjectiveEnemyExclude.includes(s)){this.adjectiveEnemyExclude.push(s),this.adjectiveEnemyExclude.length>this.excludeMaxName&&this.adjectiveEnemyExclude.shift();break}}else s=this.adjectiveEnemy[Math.floor(Math.random()*this.adjectiveEnemy.length)];if(this.raceEnemy.length>this.excludeMaxName){for(;;)if(i=this.raceEnemy[Math.floor(Math.random()*this.raceEnemy.length)],!this.raceEnemyExclude.includes(i)){this.raceEnemyExclude.push(i),this.raceEnemyExclude.length>this.excludeMaxName&&this.raceEnemyExclude.shift();break}}else i=this.raceEnemy[Math.floor(Math.random()*this.raceEnemy.length)];return e.push(s),e.push(i),e.push(t),e}loadEnemyImage(e){this.piece=e,this.file=`./src/components/enemy/images/${this.piece}`,this.loadSprite+=1;const t=new Image;return t.addEventListener("load",()=>{this.readySprite+=1}),t.src=this.file,t}loadGeneratorNames(){for(let e=0;e<a.enemyData.adjective.length;e+=1)this.adjectiveEnemy.push(a.enemyData.adjective[e]);for(let e=0;e<a.enemyData.race.length;e+=1)this.raceEnemy.push(a.enemyData.race[e]);for(let e=0;e<a.enemyData.name.length;e+=1)this.nameEnemy.push(a.enemyData.name[e])}loadResources(){for(let e=0;e<i.sprite.length;e+=1)switch(i.sprite[e].type){case"head":this.arrEnemyHead.push(this.loadEnemyImage(i.sprite[e].name));break;case"body":this.arrEnemyBody.push(this.loadEnemyImage(i.sprite[e].name));break;case"legs":this.arrEnemyLegs.push(this.loadEnemyImage(i.sprite[e].name));break;case"weapon":this.arrEnemyWeapon.push(this.loadEnemyImage(i.sprite[e].name));break;case"hurt":this.arrEnemyHurt.push(this.loadEnemyImage(i.sprite[e].name));break;case"attack":this.arrEnemyAttack.push(this.loadEnemyImage(i.sprite[e].name))}}attack(){return console.log("enemy attack!"),this.state="attack",this.shiftHead=2400,this.shiftWeapon=0,this.currentFrameWeapon=0,this.pickEnemyMagic(),this.choosePhrase=this.phraseEnemy[Math.floor(Math.random()*this.phraseEnemy.length)],this.enemyMagicSound[this.chooseEnemyMagic].play(),this.dealDamage+this.dealDamageBonus+Math.floor(5*Math.random())-5}hurt(){console.log("enemy hurt!"),this.state="hurt",this.shiftHead=300,this.shiftHurt=0,this.currentFrameHurt=0}wait(){console.log("enemy wait."),this.state="wait",this.shiftAttack=0,this.currentFrameAttack=0,this.shiftHead=0,this.currentFrameHead=0,this.shiftHurt=0,this.currentFrameHurt=0,this.health<=0&&(console.log("Enemy is dead!"),this.getNewEnemy(),this.levelUp())}levelUp(){this.level+=1,this.dealDamageBonus=2*this.level-2,console.log("enemy damage Bonus",this.dealDamageBonus)}drawRectHealth(){this.context.fillStyle="red",this.context.fillRect(this.posX-85,30,371,99),this.context.fillStyle="green";const e=Math.floor(this.health*this.widthHpBar/this.maxHealth);this.health===this.maxHealth?this.context.fillRect(this.posX-85,30,e,99):this.context.fillRect(this.posX-85+(this.widthHpBar-e),30,e,99)}drawText(e,t,s,i=!1){this.context.font="red"===i?"36px Fixedsys, Comic Sans MS, Comic Sans, cursive":"32px Fixedsys, Comic Sans MS, Comic Sans, cursive",this.context.shadowColor="black",this.context.shadowBlur=7,this.context.lineWidth=5,this.context.strokeText(e,t,s),this.context.shadowBlur=0,this.context.fillStyle=!1!==i?i:"white",this.context.fillText(e,t,s)}drawWaitAnim(){this.context.drawImage(this.arrEnemyLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+340,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrEnemyBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+170,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrEnemyWeapon[this.chooseWeapon],this.shiftWeapon,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+180,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrEnemyHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.shiftHead+=this.frameWidthHead+1,this.currentFrameHead===this.totalFramesHead&&(this.shiftHead=0,this.currentFrameHead=0),this.currentFrameHead+=1,this.shiftWeapon+=this.frameWidthWeapon+1,this.currentFrameWeapon===this.totalFramesWeapon&&(this.shiftWeapon=0,this.currentFrameWeapon=0),this.currentFrameWeapon+=1}drawAttackAnim(){this.say(),this.context.drawImage(this.arrEnemyLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+340,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrEnemyBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+170,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrEnemyWeapon[this.chooseWeapon],this.shiftWeapon,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+180,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrEnemyHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.context.drawImage(this.arrEnemyAttack[this.chooseAttack],this.shiftAttack,0,this.frameWidthAttack,this.frameHeightAttack,this.posX,this.posY,this.frameWidthAttack,this.frameHeightAttack),this.shiftAttack+=this.frameWidthAttack+1,this.currentFrameAttack===this.totalFramesAttack&&this.wait(),this.currentFrameAttack+=1}drawHurtAnim(){this.context.drawImage(this.arrEnemyLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+340,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrEnemyBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+150,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrEnemyWeapon[this.chooseWeapon],this.shiftWeapon,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+160,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrEnemyHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.context.drawImage(this.arrEnemyHurt[this.chooseHurt],this.shiftHurt,0,this.frameWidthHurt,this.frameHeightHurt,this.posX,this.posY,this.frameWidthHurt,this.frameHeightHurt),this.shiftHurt+=this.frameWidthHurt+1,this.currentFrameHurt===this.totalFramesHurt&&this.wait(),this.currentFrameHurt+=1}update(e){this.readySprite===this.loadSprite&&(this.context=e,this.drawRectHealth(),this.drawText(`${this.enemyName[0]} ${this.enemyName[1]}`,this.posX-83,55),this.drawText(this.enemyName[2],this.posX-83,90),this.drawText(`${this.health}/${this.maxHealth}`,this.posX-83,123),this.drawText(`LVL.${this.level}`,this.posX+57,123),"wait"===this.state&&this.drawWaitAnim(),"attack"===this.state&&this.drawAttackAnim(),"hurt"===this.state&&this.drawHurtAnim())}getNewEnemy(){this.chooseBody=Math.floor(Math.random()*this.arrEnemyBody.length),this.chooseHead=Math.floor(Math.random()*this.arrEnemyHead.length),this.chooseLegs=Math.floor(Math.random()*this.arrEnemyLegs.length),this.chooseWeapon=Math.floor(Math.random()*this.arrEnemyWeapon.length),this.chooseAttack=Math.floor(Math.random()*this.arrEnemyAttack.length),this.enemyName=this.getEnemyName(),this.health=this.maxHealth}getDamage(e){return console.log(`Enemy take ${e} damage!`),this.health-=e,this.status.damageTake=e,this.status.level=this.level,this.health<0&&(this.health=0),this.status.health=this.health,0===this.health?this.status.dead=!0:this.status.dead=!1,e>0&&this.hurt(),this.status}setNewWindowSize(e,t){this.width=e,this.height=t,this.posX=this.width-350,this.posY=this.height-630}}var n=s(0);class o{constructor(){this.state="wait",this.heroName="Doom Slayer",this.maxHealth=100,this.health=100,this.readySprite=0,this.loadSprite=0,this.arrHeroHead=[],this.arrHeroBody=[],this.arrHeroLegs=[],this.arrHeroWeapon=[],this.arrHeroAttack=[],this.arrHeroHurt=[],this.arrHeroHeal=[],this.shiftHead=0,this.frameWidthHead=300,this.frameHeightHead=300,this.totalFramesHead=7,this.currentFrameHead=0,this.shiftAttack=0,this.frameWidthAttack=300,this.frameHeightAttack=600,this.totalFramesAttack=8,this.currentFrameAttack=0,this.shiftHurt=0,this.frameWidthHurt=300,this.frameHeightHurt=600,this.totalFramesHurt=8,this.currentFrameHurt=0,this.shiftHeal=0,this.frameWidthHeal=300,this.frameHeightHeal=300,this.totalFramesHeal=7,this.currentFrameHeal=0,this.frameWidthLegs=300,this.frameHeightLegs=300,this.frameWidthBody=300,this.frameHeightBody=300,this.frameWidthWeapon=300,this.frameHeightWeapon=300,this.height=786,this.width=1366,this.posX=70,this.posY=this.height-520,this.scaleGeneral=1,this.chooseBody=0,this.chooseHead=0,this.chooseLegs=0,this.chooseWeapon=0,this.chooseAttack=0,this.chooseHurt=0,this.chooseHeal=0,this.magicChoose=-1,this.magicDamage=10,this.magicTarget="enemy",this.magicType="damage",this.magicName="sword",this.magicDamageSelf=0,this.magicDamage=null,this.context=null,this.loadResources()}setChooseMagic(e,t){this.magicChoose=t,this.magicDamage=e.damage,this.magicTarget=e.target,this.magicType=e.type,this.magicName=e.name,this.magicDamageSelf=e.damageself,this.magicSound=e.sound}loadResources(){for(let e=0;e<n.sprite.length;e+=1)switch(n.sprite[e].type){case"head":this.arrHeroHead.push(this.loadHeroImage(n.sprite[e].name));break;case"body":this.arrHeroBody.push(this.loadHeroImage(n.sprite[e].name));break;case"legs":this.arrHeroLegs.push(this.loadHeroImage(n.sprite[e].name));break;case"weapon":this.arrHeroWeapon.push(this.loadHeroImage(n.sprite[e].name));break;case"hurt":this.arrHeroHurt.push(this.loadHeroImage(n.sprite[e].name));break;case"attack":this.arrHeroAttack.push(this.loadHeroImage(n.sprite[e].name));break;case"heal":this.arrHeroHeal.push(this.loadHeroImage(n.sprite[e].name))}}loadHeroImage(e){this.spriteLoad+=1,this.piece=e,this.file=`./src/components/hero/images/${this.piece}`,this.loadSprite+=1;const t=new Image;return t.addEventListener("load",()=>{this.readySprite+=1}),t.src=this.file,t}pickMagic(e){this.magicChoose=e,console.log("Hero pick magic!")}attack(){return"enemy"===this.magicTarget?(console.log("Hero attack!"),this.state="attack",this.shiftHead=0,this.shiftWeapon=0,this.currentFrameWeapon=0,this.magicDamageSelf>0&&(this.health-=this.magicDamageSelf,this.health<0&&(this.health=0)),this.magicSound.play(),this.magicDamage+Math.floor(5*Math.random())-5):"hero"===this.magicTarget?(console.log("Hero restore health!"),this.state="heal",this.health+=this.magicDamage,this.health>this.maxHealth&&(this.health=this.maxHealth),this.heal(),this.magicSound.play(),0):0}hurt(){console.log("Hero hurt!"),this.state="hurt",this.shiftHead=0,this.shiftHurt=0,this.currentFrameHurt=0}heal(){console.log("Hero heal!"),this.state="heal",this.shiftHead=0,this.shiftHeal=0,this.currentFrameHeal=0}wait(){console.log("Hero wait."),this.state="wait",this.shiftAttack=0,this.currentFrameAttack=0,this.shiftHead=0,this.currentFrameHead=0,this.shiftHurt=0,this.currentFrameHurt=0,this.shiftHeal=0,this.currentFrameHeal=0,this.health<=0&&console.log("Hero is dead!")}drawRectHealth(){this.context.fillStyle="red",this.context.fillRect(15,30,371,99),this.context.fillStyle="green",this.health===this.maxHealth?this.context.fillRect(15,30,371,99):this.context.fillRect(15,30,Math.floor(371*this.health/this.maxHealth),99)}drawText(e,t,s,i=!1){this.context.font="32px Fixedsys, Comic Sans MS, Comic Sans, cursive",this.context.shadowColor="black",this.context.shadowBlur=7,this.context.lineWidth=5,this.context.strokeText(e,t,s),this.context.shadowBlur=0,this.context.fillStyle=!1!==i?i:"white",this.context.fillText(e,t,s)}drawWaitAnim(){this.context.drawImage(this.arrHeroLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+260,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrHeroBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+120,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrHeroWeapon[this.chooseWeapon],0,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+200,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrHeroHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.shiftHead+=this.frameWidthHead+1,this.currentFrameHead===this.totalFramesHead&&(this.shiftHead=0,this.currentFrameHead=0),this.currentFrameHead+=1}drawAttackAnim(){"enemy"===this.magicTarget&&this.drawText(`${this.magicName}!`,170,250,"yellow"),this.context.drawImage(this.arrHeroLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+260,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrHeroBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+120,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrHeroWeapon[this.chooseWeapon],0,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+200,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrHeroHead[this.chooseHead],0,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.context.drawImage(this.arrHeroAttack[this.chooseAttack],this.shiftAttack,0,this.frameWidthAttack,this.frameHeightAttack,this.posX,this.posY,this.frameWidthAttack,this.frameHeightAttack),this.shiftAttack+=this.frameWidthAttack+1,this.currentFrameAttack===this.totalFramesAttack&&this.wait(),this.currentFrameAttack+=1}drawHurtAnim(){this.context.drawImage(this.arrHeroLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+260,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrHeroBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+100,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrHeroWeapon[this.chooseWeapon],0,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+180,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrHeroHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.context.drawImage(this.arrHeroHurt[this.chooseHurt],this.shiftHurt,0,this.frameWidthHurt,this.frameHeightHurt,this.posX,this.posY,this.frameWidthHurt,this.frameHeightHurt),this.shiftHurt+=this.frameWidthHurt+1,this.currentFrameHurt===this.totalFramesHurt&&this.wait(),this.currentFrameHurt+=1}drawHealAnim(){this.context.drawImage(this.arrHeroLegs[this.chooseLegs],0,0,this.frameWidthLegs,this.frameHeightLegs,this.posX,this.posY+260,this.frameWidthLegs,this.frameHeightLegs),this.context.drawImage(this.arrHeroBody[this.chooseBody],0,0,this.frameWidthBody,this.frameHeightBody,this.posX,this.posY+120,this.frameWidthBody,this.frameHeightBody),this.context.drawImage(this.arrHeroWeapon[this.chooseWeapon],0,0,this.frameWidthWeapon,this.frameHeightWeapon,this.posX,this.posY+200,this.frameWidthWeapon,this.frameHeightWeapon),this.context.drawImage(this.arrHeroHead[this.chooseHead],this.shiftHead,0,this.frameWidthHead,this.frameHeightHead,this.posX,this.posY,this.frameWidthHead,this.frameHeightHead),this.context.drawImage(this.arrHeroHeal[this.chooseHeal],this.shiftHeal,0,this.frameWidthHeal,this.frameHeightHeal,this.posX,this.posY+120,this.frameWidthHeal,this.frameHeightHeal),this.shiftHeal+=this.frameWidthHeal+1,this.currentFrameHeal===this.totalFramesHeal&&this.wait(),this.currentFrameHeal+=1}setNewHeroName(e){let t;t=e.length>15?e.slice(0,15):e,this.heroName=t,""===this.heroName&&(this.heroName="Doom Slayer")}update(e){this.readySprite===this.loadSprite&&(this.context=e,this.drawRectHealth(),this.drawText(this.heroName,20,60),this.drawText(`${this.health}/${this.maxHealth}`,20,100),"wait"===this.state&&this.drawWaitAnim(),"attack"===this.state&&this.drawAttackAnim(),"hurt"===this.state&&this.drawHurtAnim(),"heal"===this.state&&this.drawHealAnim())}getDamage(e){return this.health-=e,this.health<0&&(this.health=0),console.log(`hero take ${e} damage!`),this.hurt(),0===this.health}getStatus(){return 0===this.health}setNewWindowSize(e,t){this.width=e,this.height=t,this.posY=this.height-520}}var l=s(3);class m{constructor(){this.arrBackground=[],this.arrInfoPiece=[],this.context=null,this.chooseBackground=0,this.choosePieceInfo=0,this.file=null,this.readySprite=0,this.loadSprite=0,this.height=window.innerHeight,this.width=window.innerWidth,this.scaleWidth=1,this.scalHeight=1,this.scaleGeneral=1,this.loadResources()}loadResources(){for(let e=0;e<l.sprite.length;e+=1)switch(l.sprite[e].type){case"background":this.arrBackground.push(this.loadBackgroundImage(l.sprite[e].name));break;case"info":this.arrInfoPiece.push(this.loadBackgroundImage(l.sprite[e].name))}}update(e){this.readySprite===this.loadSprite&&(this.context=e,this.context.save(),this.context.drawImage(this.arrBackground[this.chooseBackground],0,0,this.width,this.height),this.context.restore())}loadBackgroundImage(e){this.file=`./src/components/background/images/${e}`,this.loadSprite+=1;const t=new Image;return t.addEventListener("load",()=>{this.readySprite+=1}),t.src=this.file,t.style.height="100%",t.style.objectFit="cover",t}changeBackground(){if(this.arrBackground.length<=1)return!1;const e=this.chooseBackground;for(;e===this.chooseBackground;)this.chooseBackground=Math.floor(Math.random()*this.arrBackground.length);return!0}setNewWindowSize(e,t){this.width=e,this.height=t}setScale(){this.scaleWidth=Math.round(this.width/1100*100)/100,this.scalHeight=Math.round(this.height/800*100)/100}}s(15);class c{constructor(){this.arrMagic=[],this.countMagic=0,this.modalDialog=null,this.height=window.innerHeight,this.width=window.innerWidth,this.init()}createMagic(e=0,t,s="enemy",i="damage",a=0,h=-1,r){const n=Object.create(null);return n.damage=e,n.target=s,n.type=i,n.name=t,n.damageself=a,n.attempt=h,n.sound=new Audio(`./src/components/magic/sound/${r}`),this.countMagic+=1,n}createModal(){this.modalDialog=document.createElement("div"),this.modalDialog.id="modal";const e=document.createElement("div");e.id="container-modal",e.append(this.modalDialog),document.body.append(e)}init(){this.createModal(),this.initMagic()}initMagic(){this.arrMagic.push(this.createMagic(20,"Fire","enemy","damage",0,-1,"fire.mp3")),this.arrMagic.push(this.createMagic(10,"Heal","hero","heal",0,-1,"heal.mp3")),this.arrMagic.push(this.createMagic(50,"Dark","enemy","damage",30,-1,"dark_pact.mp3")),this.arrMagic.push(this.createMagic(40,"Restore","hero","heal",0,3,"restore.mp3"))}getMagic(){return this.arrMagic}attemptDown(e){this.arrMagic[e].attempt>0&&(this.arrMagic[e].attempt-=1)}showHideModal(){return"block"===this.modalDialog.style.display?(this.modalDialog.style.display="none",!1):(this.modalDialog.style.display="block",!0)}createPickMagicModal(){this.modalDialog.innerHTML="";const e=document.createElement("div"),t=document.createElement("div");e.className="magic-damage",t.className="magic-heal";for(let t=0;t<this.arrMagic.length;t+=1)"damage"===this.arrMagic[t].type&&e.append(this.createMagicIcon(t));for(let e=0;e<this.arrMagic.length;e+=1)"heal"===this.arrMagic[e].type&&t.append(this.createMagicIcon(e));this.modalDialog.appendChild(e),this.modalDialog.appendChild(t)}createMagicIcon(e){if(0===this.arrMagic[e].attempt)return"";const t=document.createElement("div");return t.classList+="select-magic",t.dataset.indexMass=e,t.dataset.damage=this.arrMagic[e].damage,t.dataset.type=this.arrMagic[e].type,"damage"===this.arrMagic[e].type&&(t.classList.add("red"),t.innerHTML=`${this.arrMagic[e].name} (-${this.arrMagic[e].damage}`),"heal"===this.arrMagic[e].type&&(t.classList.add("green"),t.innerHTML=`${this.arrMagic[e].name} (+${this.arrMagic[e].damage}`),"enemy"===this.arrMagic[e].target&&(t.innerHTML+="e)"),"hero"===this.arrMagic[e].target&&(t.innerHTML+="h)"),this.arrMagic[e].damageself>0&&(t.innerHTML+=`-${this.arrMagic[e].damageself}hp`),this.arrMagic[e].attempt>0&&(t.innerHTML+=`(${this.arrMagic[e].attempt})`),t}}s(17);class d{constructor(){this.elementDisplay=null,this.countTasks=0,this.chooseExample=-1,this.submit=null,this.input=null,this.arrZnak=["+","-","*","/"],this.numb1=0,this.symbol="",this.numb2=0,this.result=0}generateTask(){switch(this.symbol=this.arrZnak[Math.floor(Math.random()*this.arrZnak.length)],this.symbol){case"+":this.numb1=Math.floor(198*Math.random()-99),this.numb2=Math.floor(198*Math.random()-99),this.result=this.numb1+this.numb2;break;case"-":this.numb1=Math.floor(198*Math.random()-99),this.numb2=Math.floor(198*Math.random()-99),this.result=this.numb1-this.numb2;break;case"*":this.numb1=Math.floor(20*Math.random())-10,this.numb2=Math.floor(20*Math.random())-10,this.result=this.numb1*this.numb2;break;case"/":if(this.numb1=Math.floor(200*Math.random())-100,this.numb2=Math.floor(20*Math.random())-10,0===this.numb2)return!1;if(0!==this.numb1%this.numb2)return!1;this.result=this.numb1/this.numb2;break}return!0}chooseExampleTask(){for(;!this.generateTask(););this.countTasks+=1}createElement(e,t){return this.element=document.createElement(t),this.element.className="math-block",this.element.innerHTML=e,"input"===t&&this.element.setAttribute("type","text"),"submit"===e&&(this.element.className="math-submit-button"),this.element}show(){null!=this.elementDisplay&&(document.getElementById("math-task-container").remove(),this.elementDisplay=null),this.chooseExampleTask();const e=document.createElement("div");e.id="math-task-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="math-task";const t=document.createElement("div");return t.innerText="Впишите ответ примера:",this.elementDisplay.append(t),this.elementDisplay.append(this.createElement(this.numb1,"div")),this.elementDisplay.append(this.createElement(this.symbol,"div")),this.elementDisplay.append(this.createElement(this.numb2,"div")),this.elementDisplay.append(this.createElement("=","div")),this.input=this.createElement("","INPUT"),this.elementDisplay.append(this.input),this.submit=this.createElement("submit","div"),this.elementDisplay.append(this.submit),e.append(this.elementDisplay),document.body.append(e),new Promise((e,t)=>{this.submit.addEventListener("click",t=>(function t(s,i,a){s.target.removeEventListener("click",e=>t(e,this.input.value,this.result,this.closeTask()));const h=[];h.push(s),a===parseInt(i,10)?h.push(!0):h.push(!1),e(h)})(t,this.input.value,this.result,this.closeTask()))}).then(e=>"click"===e[0].type?e[1]:"Fail!")}closeTask(){this.input=null,this.submit=null,document.getElementById("math-task-container").remove(),this.elementDisplay=null}}s(19);var u=s(4);class p{constructor(){this.example=[],this.exampleStart=[],this.elementDisplay=null,this.countTasks=0,this.chooseExample=-1,this.init()}createTask(e,t){this.countTasks+=1;const s=Object.create(null);return s.word=e,s.result=t,s}init(){for(let e=0;e<u.example.length;e+=1)this.example.push(this.createTask(u.example[e].word,u.example[e].result));this.exampleStart=this.example.slice()}chooseExampleTask(){0===this.example.length&&(this.example=this.exampleStart.slice()),this.chooseExample=Math.floor(Math.random()*this.example.length)}createElement(e,t,s){return this.element=document.createElement(s),this.element.className="mistake-word-block",this.element.innerHTML=e,this.element.dataset.id=t,this.element}closeTask(){document.getElementById("mistake-word-task-container").remove(),this.elementDisplay=null,this.example.splice(this.chooseExample,1)}show(){null!=this.elementDisplay&&(document.getElementById("mistake-word-task-container").remove(),this.elementDisplay=null),this.chooseExampleTask();const e=document.createElement("div");e.id="mistake-word-task-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="mistake-word-task";const t=document.createElement("div");t.innerText="Выбирите неправильную букву в слове:",this.elementDisplay.append(t);const s=this.example[this.chooseExample].word.split("");for(let e=0;e<s.length;e+=1)this.elementDisplay.append(this.createElement(s[e],e,"div"));return e.append(this.elementDisplay),document.body.append(e),new Promise((e,t)=>{this.elementDisplay.addEventListener("click",t=>(function t(s,i,a,h){a.removeEventListener("click",e=>t(e,this.example[this.chooseExample].result,this.elementDisplay,this)),s.target.classList.contains("mistake-word-block")&&(h.closeTask(),parseInt(s.target.dataset.id,10)===i?e(!0):e(!1))})(t,this.example[this.chooseExample].result,this.elementDisplay,this))}).then(e=>e)}}s(21);var g=s(5);class y{constructor(){this.example=[],this.exampleStart=[],this.elementDisplay=null,this.countTasks=0,this.chooseExample=-1,this.init()}createTask(e,t){this.countTasks+=1;const s=Object.create(null);return s.word=e,s.result=t,s}init(){for(let e=0;e<g.example.length;e+=1)this.example.push(this.createTask(g.example[e].word,g.example[e].result));this.exampleStart=this.example.slice()}chooseExampleTask(){0===this.example.length&&(this.example=this.exampleStart.slice()),this.chooseExample=Math.floor(Math.random()*this.example.length)}createElement(e,t){return this.element=document.createElement(t),this.element.className="eng-rus-translate-block",this.element.innerHTML=e,"input"===t&&this.element.setAttribute("type","text"),"submit"===e&&(this.element.className="eng-rus-translate-submit-button"),this.element}closeTask(){document.getElementById("eng-rus-translate-container").remove(),this.elementDisplay=null,this.example.splice(this.chooseExample,1)}show(){null!=this.elementDisplay&&(document.getElementById("eng-rus-translate-container").remove(),this.elementDisplay=null),this.chooseExampleTask();const e=document.createElement("div");e.id="eng-rus-translate-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="eng-rus-translate-task";const t=document.createElement("div");t.innerText="Переведите слово с английского на русский:",this.elementDisplay.append(t);const s=this.example[this.chooseExample].word;return this.elementDisplay.append(this.createElement(s,"div")),this.input=this.createElement("","INPUT"),this.elementDisplay.append(this.input),this.submit=this.createElement("submit","div"),this.elementDisplay.append(this.submit),e.append(this.elementDisplay),document.body.append(e),new Promise((e,t)=>{this.submit.addEventListener("click",t=>(function t(s,i,a,h){s.target.removeEventListener("click",e=>t(e,this.input.value,this.example[this.chooseExample].result,this)),a.includes(i.toLowerCase())?(e(!0),h.closeTask()):(e(!1),h.closeTask())})(t,this.input.value,this.example[this.chooseExample].result,this))}).then(e=>e)}}s(23);var w=s(7);class f{constructor(){this.example=[],this.exampleStart=[],this.elementDisplay=null,this.countTasks=0,this.chooseExample=-1,this.el=null,this.before=!0,this.elementUl=null,this.init()}init(){for(let e=0;e<w.example.length;e+=1)this.example.push(w.example[e]);this.exampleStart=this.example.slice()}chooseExampleTask(){0===this.example.length&&(this.example=this.exampleStart.slice()),this.chooseExample=Math.floor(Math.random()*this.example.length)}createElement(e,t){return this.element=document.createElement(t),this.element.className="restore-word-order-block",this.element.innerHTML=e,this.element.draggable=!0,"submit"===e&&(this.element.className="restore-word-order-submit-button"),"li"===t&&(this.element.addEventListener("dragend",()=>{this.dragEnd()}),this.element.addEventListener("dragover",e=>{this.dragOver(e)}),this.element.addEventListener("dragstart",e=>{this.dragStart(e)}),this.element.addEventListener("touchstart",e=>{this.touchStart(e)})),this.element}closeTask(){document.getElementById("restore-word-order-container").remove(),this.elementDisplay=null,this.example.splice(this.chooseExample,1)}generateMixWord(){const e=this.example[this.chooseExample].split("");e.sort((e,t)=>Math.random()-.5),this.elementUl=document.createElement("UL");for(let t=0;t<e.length;t+=1)this.elementUl.append(this.createElement(e[t],"li"));return this.elementUl}show(){null!=this.elementDisplay&&(document.getElementById("restore-word-order-container").remove(),this.elementDisplay=null),this.chooseExampleTask();const e=document.createElement("div");e.id="restore-word-order-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="restore-word-order-task";const t=document.createElement("div");return t.innerText="Соберите слово на английском:",this.elementDisplay.append(t),this.elementDisplay.append(this.generateMixWord()),this.submit=this.createElement("submit","div"),this.elementDisplay.append(this.submit),e.append(this.elementDisplay),document.body.append(e),new Promise((e,t)=>{this.submit.addEventListener("click",t=>(function t(s,i,a,h){s.target.removeEventListener("click",e=>t(e,this.example[this.chooseExample],this.elementUl,this));let r="";for(let e=0;e<a.childNodes.length;e+=1)r+=a.childNodes[e].innerText;r===i?(e(!0),h.closeTask()):(e(!1),h.closeTask())})(t,this.example[this.chooseExample],this.elementUl,this))}).then(e=>e)}dragOver(e){this.isBefore(this.el,e.target)?e.target.parentNode.insertBefore(this.el,e.target):e.target.parentNode.insertBefore(this.el,e.target.nextSibling)}dragEnd(){this.el=null}dragStart(e){console.log(e),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",null),this.el=e.target}touchStart(e){e.preventDefault(),null!==this.el?this.el!==e.target&&(this.isBefore(this.el,e.target)?(e.target.parentNode.insertBefore(this.el,e.target),this.el=null):(e.target.parentNode.insertBefore(this.el,e.target.nextSibling),this.el=null)):this.el=e.target}isBefore(e,t){if(t.parentNode===e.parentNode)for(let s=e.previousSibling;s;s=s.previousSibling)if(s===t)return this.before=!0,!0;return this.before=!1,!1}}s(25);var H=s(8);class k{constructor(){this.example=[],this.exampleStart=[],this.elementDisplay=null,this.countTasks=0,this.chooseExample=-1,this.utterance=new SpeechSynthesisUtterance,this.utterance.lang="en-US",this.utterance.volume=1,this.utterance.rate=.5,this.utterance.pitch=1,this.utterance.text="",this.input=null,this.submit=null,this.play=null,this.init()}init(){for(let e=0;e<H.example.length;e+=1)this.example.push(H.example[e]);this.exampleStart=this.example.slice()}chooseExampleTask(){0===this.example.length&&(this.example=this.exampleStart.slice()),this.chooseExample=Math.floor(Math.random()*this.example.length)}createElement(e,t){return this.element=document.createElement(t),this.element.className="speech-synthesis-block",this.element.innerHTML=e,"input"===t&&this.element.setAttribute("type","text"),"submit"===e&&(this.element.className="speech-synthesis-submit-button"),"play"===e&&(this.element.className="speech-synthesis-play-button"),this.element}closeTask(){document.getElementById("speech-synthesis-container").remove(),this.elementDisplay=null,this.example.splice(this.chooseExample,1)}show(){null!=this.elementDisplay&&(document.getElementById("speech-synthesis-container").remove(),this.elementDisplay=null),this.chooseExampleTask();const e=document.createElement("div");e.id="speech-synthesis-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="speech-synthesis-task";const t=document.createElement("div");return t.innerText="Прослущайте слово и запишите его на английском:",this.elementDisplay.append(t),this.utterance.text=this.example[this.chooseExample],this.play=this.createElement("play","div"),this.elementDisplay.append(this.play),this.play.addEventListener("click",()=>speechSynthesis.speak(this.utterance)),this.input=this.createElement("","INPUT"),this.elementDisplay.append(this.input),this.submit=this.createElement("submit","div"),this.elementDisplay.append(this.submit),e.append(this.elementDisplay),document.body.append(e),speechSynthesis.speak(this.utterance),new Promise((e,t)=>{this.submit.addEventListener("click",t=>(function t(s,i,a,h){s.target.removeEventListener("click",e=>t(e,this.input.value,this.example[this.chooseExample].result,this)),a===i.toLowerCase()?(e(!0),h.closeTask()):(e(!1),h.closeTask())})(t,this.input.value,this.example[this.chooseExample],this))}).then(e=>e)}}class x{constructor(){this.arrTasks=[],this.countTasks=0,this.init()}init(){this.arrTasks.push(new d),this.countTasks+=1,this.arrTasks.push(new p),this.countTasks+=1,this.arrTasks.push(new y),this.countTasks+=1,this.arrTasks.push(new k),this.countTasks+=1,this.arrTasks.push(new f),this.countTasks+=1}getTasks(){const e=Math.floor(Math.random()*this.arrTasks.length);return this.arrTasks[e].show().then(e=>e)}}class E{constructor(e){this.namePlayer=e,this.score=0,this.winstreak=0,this.levelEnemy=1,this.context=null,this.displayScore="00000000",this.height=768,this.width=1366}breakWinstreak(){this.winstreak=0}representationScore(){this.displayScore=String(`00000000${this.score}`).slice(-8)}countScore(e){this.score+=Math.floor((e.damageTake+1.05*this.winstreak)*(1+.01*e.level)),this.winstreak+=1,this.winstreak>10&&(this.winstreak=10),this.representationScore(),console.log("temp score",this.score)}drawText(e,t,s,i=!1){this.context.font="32px Fixedsys, Comic Sans MS, Comic Sans, cursive",this.context.shadowColor="black",this.context.shadowBlur=7,this.context.lineWidth=5,this.context.strokeText(e,t,s),this.context.shadowBlur=0,this.context.fillStyle=!1!==i?i:"white",this.context.fillText(e,t,s)}update(e){this.context=e,this.drawText("Score:",Math.floor(this.width/2)-70,80),this.drawText(`${this.displayScore}`,Math.floor(this.width/2)-90,120)}setNewWindowSize(e,t){this.width=e,this.height=t}}s(27);class b{constructor(){this.tempScore=0,this.killEnemy=0,this.nameHero="Doom Slayer",this.allRecords=null,this.elementDisplay=null,this.init()}createDefault(){console.log(this.allRecords);const e=Object.create(null);e.records=[],e.records.push({name:"Sergey",enemyKill:17,record:4576}),e.records.push({name:"Ghost",enemyKill:19,record:5e3}),e.records.push({name:"Nika",enemyKill:7,record:1400});const t=JSON.stringify(e);localStorage.setItem("dungeonMaster",t),this.allRecords=JSON.parse(localStorage.getItem("dungeonMaster"))}sortRecords(){this.allRecords.records.sort((e,t)=>t.record-e.record),this.allRecords.records.length>10&&this.allRecords.records.pop()}init(){this.allRecords=JSON.parse(localStorage.getItem("dungeonMaster")),null===this.allRecords&&this.createDefault(),this.sortRecords()}createElement(e,t,s){this.element=document.createElement(s),this.element.className="record-container";const i=document.createElement(s);i.className="record-block",i.innerHTML=`${t}. ${e.name}`;const a=document.createElement(s);a.className="record-block",a.innerHTML=e.enemyKill;const h=document.createElement(s);return h.className="record-block",h.innerHTML=e.record,this.element.append(i),this.element.append(a),this.element.append(h),this.element}close(){null!=this.elementDisplay&&(document.getElementById("table-score-container").remove(),this.elementDisplay=null)}generateDisplay(){null!=this.elementDisplay&&(document.getElementById("table-score-container").remove(),this.elementDisplay=null);const e=Object.create(null);e.name="Имя",e.enemyKill="Враги",e.record="Очки";const t=document.createElement("div");t.id="table-score-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="table-score",this.elementDisplay.append(this.createElement(e,"№","div"));for(let e=0;e<this.allRecords.records.length;e+=1)this.elementDisplay.append(this.createElement(this.allRecords.records[e],e+1,"div"));const s=document.createElement("div");s.className="record-submit-button",s.innerText="Close",s.addEventListener("click",()=>{this.close()}),this.elementDisplay.append(s),t.append(this.elementDisplay),document.body.append(t)}showTableScore(){return null===this.elementDisplay&&this.generateDisplay(),"block"===this.elementDisplay.style.display?(this.elementDisplay.style.display="none",!0):(this.elementDisplay.style.display="block",!1)}saveTableOfRecords(){const e=JSON.stringify(this.allRecords);localStorage.setItem("dungeonMaster",e)}addNewRecord(e,t,s){this.allRecords.records.push({name:e,enemyKill:t,record:s}),this.sortRecords(),this.generateDisplay(),this.saveTableOfRecords(),console.log("add new Record!",this.allRecords)}}class M{constructor(){this.enemy=new r,this.hero=new o,this.background=new m,this.serviceTasks=new x,this.magic=new c,this.score=new E,this.tableOfRecords=new b,this.canvas=null,this.context=null,this.enemyStatus=Object.create(null),this.enemyStatus.dead=!1,this.heroStatusDead=!1,this.choseMagic=null,this.stop=!0,this.fpsInterval=null,this.startTime=null,this.now=null,this.then=null,this.elapsed=null,this.fps=null,this.hideMagicChooseFlag=!0,this.resultData=!1,this.height=800,this.width=1100,this.scaleWidth=1,this.scaleWidth=1,this.scaleGeneral=1}showHideMagicChoose(){return"none"===this.choseMagic.style.display?(this.choseMagic.style.display="block",this.hideMagicChooseFlag=!1,!0):(this.choseMagic.style.display="none",this.hideMagicChooseFlag=!0,this.resultData=!1,!1)}initCanvas(){this.canvas=document.createElement("canvas"),this.canvas.id="myCanvas",this.canvas.width=1100,this.canvas.height=800,document.body.append(this.canvas),this.context=this.canvas.getContext("2d")}initTestButtons(){document.getElementById("records").addEventListener("click",()=>{this.tableOfRecords.showTableScore()}),document.getElementById("enemy-attack").addEventListener("click",()=>{this.hero.getDamage(this.enemy.attack())}),document.getElementById("enemy-random").addEventListener("click",()=>{this.enemy.getNewEnemy()}),document.getElementById("enemy-hurt").addEventListener("click",()=>{this.enemy.hurt()}),document.getElementById("hero-attack").addEventListener("click",()=>{this.enemy.getDamage(this.hero.attack())}),document.getElementById("hero-hurt").addEventListener("click",()=>{this.hero.hurt()}),document.getElementById("hero-health").addEventListener("click",()=>{this.hero.health=this.hero.maxHealth})}initMagicPickMagic(){const e=document.createElement("div");e.id="container-pick-magic",this.choseMagic=document.createElement("div"),this.choseMagic.id="pick-magic",this.choseMagic.innerText="Magic",e.append(this.choseMagic),document.body.append(e)}init(){this.initMagicPickMagic(),this.initCanvas(),this.initTestButtons(),this.choseMagic.addEventListener("click",e=>{e.stopPropagation(),this.magic.showHideModal()&&this.magic.createPickMagicModal(),this.showHideMagicChoose()}),this.magic.modalDialog.addEventListener("click",e=>{e.stopPropagation(),this.resultData=!1,e.target.classList.contains("select-magic")&&(this.magic.showHideModal(),this.magic.attemptDown(e.target.dataset.indexMass),this.hero.setChooseMagic(this.magic.getMagic()[e.target.dataset.indexMass],e.target.dataset.indexMass),this.serviceTasks.getTasks().then(e=>{e?(this.enemyStatus=this.enemy.getDamage(this.hero.attack()),this.score.countScore(this.enemyStatus)):(this.heroStatusDead=this.hero.getDamage(this.enemy.attack()),this.score.breakWinstreak()),this.heroStatusDead=this.hero.getStatus(),this.heroStatusDead&&this.tableOfRecords.addNewRecord(this.hero.heroName,this.enemy.level-1,this.score.score),this.resultData=!0}))}),document.getElementById("background").addEventListener("click",()=>{this.background.changeBackground()}),this.background.changeBackground()}startAnimating(e){this.fps=e,this.fpsInterval=1e3/this.fps,this.then=Date.now(),this.startTime=this.then,this.context.font="32px Fixedsys, Comic Sans MS, Comic Sans, cursive",this.stop=!1,this.animate()}stopnimating(){this.stop=!0}animate(){this.stop||(requestAnimationFrame(()=>this.animate()),this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.context.clearRect(0,0,this.width,this.height),"wait"===this.enemy.state&&"wait"===this.hero.state&&this.resultData&&(this.resultData=!1,this.showHideMagicChoose(),this.enemyStatus.dead&&(this.background.changeBackground(),this.enemyStatus.dead=!1),this.heroStatusDead&&(this.showHideMagicChoose(),this.tableOfRecords.showTableScore(),this.stop=!0)),this.background.update(this.context),this.context.save(),this.context.scale(this.scaleWidth,this.scalHeight),this.score.update(this.context),this.enemy.update(this.context),this.hero.update(this.context),this.context.restore()))}setNewWindowSize(e,t){this.width=e,this.height=t,this.background.setNewWindowSize(this.width,this.height),this.setScale()}setScale(){this.scaleWidth=Math.round(this.width/1366*100)/100,this.scalHeight=Math.round(this.height/768*100)/100}}s(29);class v{constructor(){this.nameHero="Doom Slayer",this.elementDisplay=null,this.showNewGame=null,this.showAbout=null,this.showRecords=null,this.cancel=null,this.showAboutContainer=null,this.aboutImage=new Image,this.aboutImage.src="./src/components/mainmenu/image/author.jpg",this.aboutImage.width="200",this.aboutImage.height="200"}getHeroName(){return this.nameHero}closeTask(){document.getElementById("main-menu-container").remove(),this.elementDisplay=null}createElement(e,t){return this.element=document.createElement(t),this.element.className="main-menu-block","input"===t&&this.element.setAttribute("type","text"),"submit"===e&&(this.element.className="main-menu-submit-button",this.element.innerText=e),this.element}closeAbout(){null!=this.showAboutContainer&&(document.getElementById("about-container").remove(),this.showAboutContainer=null)}about(){this.closeAbout(),this.showAboutContainer=document.createElement("div"),this.showAboutContainer.id="about-container",this.showAbout=document.createElement("div"),this.showAbout.id="about";const e=document.createElement("div");e.innerText="<-Dungeon Master->",e.style.fontSize="30px";const t=document.createElement("div");t.innerText="Creator:",t.style.fontSize="30px";const s=document.createElement("div");s.innerText="SystemGhost",s.style.fontSize="30px";const i=document.createElement("a");i.innerText="Me in Github",i.href="https://github.com/SystemGhost",i.style.fontSize="30px";const a=document.createElement("div");a.className="about-submit-button",a.innerText="Close",a.addEventListener("click",()=>{this.closeAbout()}),this.showAbout.innerHTML+=e.outerHTML+this.aboutImage.outerHTML+t.outerHTML+s.outerHTML+i.outerHTML,this.showAbout.append(a),this.showAboutContainer.append(this.showAbout),document.body.append(this.showAboutContainer)}showMenu(){null!=this.elementDisplay&&(document.getElementById("main-menu-container").remove(),this.elementDisplay=null);const e=document.createElement("div");e.id="main-menu-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="main-menu";const t=document.createElement("div");t.innerText="<-Dungeon Master->",t.style.fontSize="40px",this.elementDisplay.append(t),this.showNewGame=this.createElement("submit","div"),this.showNewGame.innerText="New Game",this.elementDisplay.append(this.showNewGame),this.showRecords=this.createElement("submit","div"),this.showRecords.innerText="Records",this.elementDisplay.append(this.showRecords),this.showAbout=this.createElement("submit","div"),this.showAbout.innerText="About",this.elementDisplay.append(this.showAbout),e.append(this.elementDisplay),document.body.append(e)}newGame(){null!=this.elementDisplay&&(document.getElementById("main-menu-container").remove(),this.elementDisplay=null);const e=document.createElement("div");e.id="main-menu-container",this.elementDisplay=document.createElement("div"),this.elementDisplay.id="main-menu";const t=document.createElement("div");return t.innerText="Введите имя героя:",this.elementDisplay.append(t),this.input=this.createElement("","INPUT"),this.elementDisplay.append(this.input),this.submit=this.createElement("submit","div"),this.elementDisplay.append(this.submit),e.append(this.elementDisplay),document.body.append(e),new Promise((e,t)=>{this.submit.addEventListener("click",t=>(function t(s,i,a){s.target.removeEventListener("click",e=>t(e,this.input.value,this)),e(i),a.closeTask()})(t,this.input.value,this))}).then(e=>e)}}let W,D;window.onload=(()=>{D=new v,W=new M,D.showMenu(),D.showNewGame.addEventListener("click",()=>{D.newGame().then(e=>{W.init(),W.hero.setNewHeroName(e),W.startAnimating(5),window.onresize()})}),D.showRecords.addEventListener("click",()=>{W.tableOfRecords.showTableScore()}),D.showAbout.addEventListener("click",()=>{D.about()})}),window.onresize=(()=>{W.stop||(W.canvas.width=window.outerWidth-20,W.canvas.height=window.outerHeight-20,W.setNewWindowSize(W.canvas.width,W.canvas.height))});s(31)},function(e,t){},,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){}]);
//# sourceMappingURL=bundle.js.map